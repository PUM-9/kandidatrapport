%% 
\chapter{Metod}
\label{cha:method}

\section{Utvecklingsmetod}

I projektet har man försökt använda en iterativ process med vissa inslag av vattenfallsmodellen på grund av den korta tidsperioden som projektet skulle genomföras under. Utvecklingsledaren har varit ansvarig för att ta fram vad som ska göras i varje iteration och planera iterationerna i samråd med övriga gruppmedlemmar. Teamledaren har varit ansvarig för att planera de administrativa delarna av projektet. För att planera en iteration så utgick man från kravspecifikationen och bröt ner den till aktiviteter. Målet med varje skapad aktivitet var att den ska vara genomförbar på mindre än en vecka. Detta var tanken i teorin men i praktiken höll inte alltid planeringen. När aktiviteterna var skapade så gjorde utvecklingsledaren med inrådan från bland annat arkitekten en tidsuppskattning på varje aktivitet och hur många som borde jobba med aktiviteten. Efter planeringen gick man igenom aktiviteterna med gruppen. När alla vet vad som ska göras under iterationen väljer gruppmedlemmarna vilka aktiviteter de vill delta i. Vidare under iterationen planeras vad som ska göras i varje aktivitet av de som är involverade i den aktiviteten.

\subsection{Förstudie}

Projektet startades med en förstudie där gruppen sammanställde diverse dokument. Syftet med dessa dokument är att både gruppmedlemmarna själva och externa parter ska få en bättre insikt i vad projektet går ut på och vad dess mål är. Dokumenten utformades och togs fram av den eller de personer i gruppen som var bäst lämpad för ett visst dokument, med det menas den person som passade bäst för ett visst dokument med avseende på dennes roll. Detta ledde även till att den personen fick mer erfarenheter och kunskaper om vad dennes roll innebar.

Gruppen började sedan att studera de områden, verktyg och ramverk som man visste skulle behövas för projektet. Den information som gruppen hade från början var den som kunden tillhandahållit och utifrån denna information upptäcktes en del nya områden som behövde undersökas. Under förstudien delade utvecklingsledaren ut olika områden att undersöka. Efter ett område undersökts skrevs ett kort dokument som beskrev slutsatserna och relevanta länkar från undersökningen. De största områdena som undersöktes var ROS och PCL. Framförallt undersöktes ROS eftersom det hade en stor påverkan på hur arkitekturen och implementation skulle genomföras. Att undersöka ROS noggrant var dessutom välbehövligt eftersom ingen i gruppen hade arbetat med det tidigare. Eftersom det hade så stor påverkan så avslutades den undersökningen med en lista av guider som alla gruppmedlemmar genomförde. När alla genomfört de guiderna genomfördes en kodutmaning där alla gruppmedlemmar skrev en chattklient med hjälp av ROS. Detta avslutade förstudiefasen med att alla fick skriva lite kod. 

\subsection{Iteration 1}

En två veckor lång iteration där målet är att få klart basfunktionaliteten för produkten. Första veckan hade fokus på att skriva kod, skapa ett interface till den existerande mjukvaran, registrera och mesha punktmoln. Att registrera ett punktmoln betyder att man ska matcha en uppsamling av inkompletta punktmoln med varandra för att erhålla ett komplett punktmoln. Detta kompletta punktmoln ska sedan meshas för att generera ett 3D-objekt uppbyggt av polygoner. Andra veckan var det mer fokus på dokumentation, samt att färdigställa så mycket som möjligt av det som påbörjades under första veckan. Målet var nog lite högt satt men resultatet blev tillfredsställande.

\subsection{Iteration 2}

Iterationen inledes med fokus på registrering då detta var det stora frågetecknet i projektet. Efter att först undersökt olika algoritmer beslutades det att vi skulle fortsätta med ICP då den hade bäst stöd i PCL-biblioteket. Efter det så delades gruppen i två för att arbeta med två olika algoritmer för att registrera punktmolnen. Den första algoritmen var att försöka vrida och placera punktmolnen rätt från början och på så sätt få det väldigt enkelt att sedan registrera punktmolnen med ICP. Problemet var att för att få detta att fungera behövde den algoritmen vara väldigt generell vilket gjorde den svår att ta fram och fullända. Speciellt för de då ansedda enkla objekten som var väldigt släta. Den andra algoritmen var mer anpassad för de då ansedda enkla objekten. Den gick ut på att i första hand endast lösa problemet med att registrera rätblocksliknande föremål. Detta gjorde den genom att hitta en så platt yta som möjligt, anta att det var en sida och sedan ta fyra skanningar med 90 graders rotation mellan varje. Dessa punktmoln registrerades sedan på ett genererat rätblock. 

Den andra algoritmen var den som gick längst tills den skulle börja testas ihop med hårdvaran. Då upptäcktes att det fanns mängder med fel på det underliggande systemet som tog fram punktmolnen. Det gick inte att genomföra tillräckligt många skanningar i rad utan att det underliggande systemet kraschade. 

Detta gjorde att vi tillsammans med kunden fick göra om en stor del av projektet där vi bortsåg från det tidigare systemet helt och hållet. Vi beslutade också tillsammans med kunden att det borde vara lättare att registrera mer detaljerade objekt. Så vi gick tillbaka till algoritmen för att placera rätt och sedan registrera. Denna nya registrering placerades i ett helt nytt program så vi började även bygga ett CLI och integrera meshning och registrering i ett enda program. Istället för att som tidigare bygga allt som enskilda ROS-noder. 

\section{Metod för att fånga erfarenheter}

Erfarenheter fångades upp under projektets gång med hjälp av utvärderingar och undersökningar efter varje iteration. I dessa så fick alla gruppmedlemmar svara på en del frågor kring hur arbetet gått, vad som varit svårt och vad som gått bra. De två fasta mötena varje vecka har också varit ett forum att dela med sig av och fånga upp erfarenheter. Den här rapporten har också använts för att samla ihop och skriva ner erfarenheter från projektet. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% method.tex ends here
